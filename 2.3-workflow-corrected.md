# Workflow Structure Corrected

**Date:** 2026-01-28 16:00 CET  
**Issue:** Commands vs Skills terminology  
**Status:** Fixed

---

## The Problem

I initially used "commands" terminology from the everything-claude-code repo, but Clawdbot (the actual Claude Code implementation) uses **Skills** not commands.

## The Fix

### Before (Wrong)
```
.claude/
â”œâ”€â”€ commands/
â”‚   â”œâ”€â”€ plan.md
â”‚   â”œâ”€â”€ tdd.md
â”‚   â”œâ”€â”€ code-review.md
â”‚   â””â”€â”€ verify.md
```

### After (Correct)
```
skills/
â”œâ”€â”€ plan/
â”‚   â””â”€â”€ SKILL.md
â”œâ”€â”€ tdd/
â”‚   â””â”€â”€ SKILL.md
â”œâ”€â”€ code-review/
â”‚   â””â”€â”€ SKILL.md
â””â”€â”€ verify/
    â””â”€â”€ SKILL.md
```

---

## Skills Structure (Correct)

Each skill follows the AgentSkills spec:

```markdown
---
name: plan
description: Create detailed implementation plans
user-invocable: true
metadata: {"clawdbot":{"emoji":"ğŸ“‹"}}
---

# Implementation Planner

[Instructions for the agent...]
```

**Key Fields:**
- `name`: Skill identifier (becomes /plan command)
- `description`: What the skill does
- `user-invocable: true`: Exposes as slash command
- `metadata.clawdbot.emoji`: UI decoration
- `metadata.clawdbot.requires.bins`: Required binaries (e.g., ["php","pnpm"])

---

## Skills Created

### 1. /plan (ğŸ“‹)
**File:** `skills/plan/SKILL.md`  
**Purpose:** Create detailed implementation plans  
**Usage:** `/plan 103` or `/plan "add feature X"`

### 2. /tdd (ğŸ§ª)
**File:** `skills/tdd/SKILL.md`  
**Purpose:** Test-driven development workflow  
**Requires:** php, pnpm  
**Usage:** `/tdd 103`

### 3. /code-review (ğŸ”)
**File:** `skills/code-review/SKILL.md`  
**Purpose:** Security & quality review  
**Usage:** `/code-review`

### 4. /verify (âœ…)
**File:** `skills/verify/SKILL.md`  
**Purpose:** Run test suite, check coverage  
**Requires:** php, pnpm  
**Usage:** `/verify`

---

## How Skills Work in Clawdbot

### Loading Priority
1. `<workspace>/skills/` (highest) â† **Our skills here**
2. `~/.clawdbot/skills` (managed/local)
3. Bundled skills (lowest)

### Skill Discovery
Clawdbot auto-discovers SKILL.md files in the skills directory.

### Slash Commands
When `user-invocable: true` is set, the skill becomes available as `/skillname`.

### Metadata Gating
Skills can require:
- Binaries: `requires.bins: ["php"]`
- Environment variables: `requires.env: ["OPENAI_API_KEY"]`
- Config values: `requires.config: ["browser.enabled"]`

---

## Agents Structure (Still Correct)

Agents remain in `.claude/agents/` and are separate from skills:

```
.claude/agents/
â”œâ”€â”€ planner.md
â”œâ”€â”€ tdd-guide.md
â”œâ”€â”€ code-reviewer.md
â””â”€â”€ build-error-resolver.md
```

**Agents vs Skills:**
- **Agents**: Specialized sub-agents for delegation (different persona)
- **Skills**: Workflow instructions for the main agent (slash commands)

---

## Hooks Structure (Still Correct)

Hooks remain in `.claude/settings.json`:

```json
{
  "hooks": {
    "PreToolUse": [...],
    "PostToolUse": [...],
    "SessionStart": [...]
  }
}
```

---

## Testing The Skills

### 1. Verify Skills Load
```bash
# Skills should be auto-discovered
# Check if slash commands work:
/plan --help
/tdd --help
/code-review
/verify
```

### 2. Test a Workflow
```bash
# Plan an issue
/plan 103

# Implement with TDD
/tdd 103

# Review code
/code-review

# Verify tests pass
/verify
```

---

## Documentation References

- **Clawdbot Skills Docs:** `/usr/local/lib/node_modules/clawdbot/docs/tools/skills.md`
- **Creating Skills:** `/usr/local/lib/node_modules/clawdbot/docs/tools/creating-skills.md`
- **AgentSkills Spec:** https://agentskills.io

---

## Summary

âœ… **Fixed:** Commands â†’ Skills with SKILL.md files  
âœ… **Structure:** Follows AgentSkills specification  
âœ… **User-Invocable:** All skills available as slash commands  
âœ… **Committed:** Changes pushed to GitHub

---

**Next:** Test the workflow with `/plan 103`

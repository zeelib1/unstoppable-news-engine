# AskFiles.io - MVP Build Plan

**Domain:** askfiles.io (purchased)  
**Product:** Knowledge Base from Any Document  
**Timeline:** Ship in 1 day  
**Date:** January 28, 2026

---

## Product Overview

**AskFiles** = Upload documents (PDF, DOCX, PPTX, TXT) → AI-powered searchable knowledge base

**Core Value:** "Ask your files anything. They'll answer."

---

## Tech Stack

| Layer | Technology | Why |
|-------|------------|-----|
| **Vector DB** | Qdrant (Docker) | Free, self-hosted, no vendor lock-in |
| **Embeddings** | OpenAI text-embedding-3-small | $0.02/1M tokens, industry standard |
| **Document Processing** | Docling (existing) | Already built, handles PDF/DOCX/PPTX |
| **Summarization** | Claude (via CLI, Max sub) | Free with existing subscription |
| **Backend API** | Laravel 11 (existing) | Already built, production-ready |
| **Frontend** | Nuxt 3 (existing) | SSR, fast, SEO-friendly |
| **Web Server** | Caddy | Auto SSL, simple config |

---

## MVP Features (Day 1)

### Upload Flow
1. User visits askfiles.io
2. Drag & drop or select files (no signup required)
3. System processes:
   - Extract text via Docling
   - Chunk text (500-1000 char chunks)
   - Generate embeddings (OpenAI)
   - Store in Qdrant with metadata
4. Redirect to unique URL: `askfiles.io/kb/{unique_id}`

### Search/Query Flow
1. User enters question in search box
2. System:
   - Embeds question
   - Searches Qdrant for top 5 relevant chunks
   - Optionally: Passes chunks to Claude for synthesized answer
3. Display results with source references (doc name, page #)

### Public Knowledge Base
- Each upload gets shareable URL
- Anyone with link can search
- No auth required (for MVP)

---

## What We're NOT Building Today

- ❌ User accounts / authentication
- ❌ Private knowledge bases
- ❌ Payment / billing
- ❌ Admin dashboard
- ❌ Multiple file management (just upload → search)
- ❌ File deletion (can add later)

---

## Architecture

```
┌─────────────────────────────────────────────────────────┐
│                    askfiles.io                          │
│                   (Nuxt 3 Frontend)                     │
└────────────────────┬────────────────────────────────────┘
                     │
                     ▼
┌─────────────────────────────────────────────────────────┐
│               Laravel 11 API Backend                    │
│                                                         │
│  POST /api/v1/knowledge-bases                          │
│       → Upload files, process, store                    │
│                                                         │
│  GET  /api/v1/knowledge-bases/{id}                     │
│       → Get knowledge base metadata                     │
│                                                         │
│  GET  /api/v1/knowledge-bases/{id}/search?q=...        │
│       → Search knowledge base                           │
└────────────┬──────────────────────┬─────────────────────┘
             │                      │
             ▼                      ▼
    ┌────────────────┐      ┌──────────────┐
    │  Qdrant        │      │  OpenAI API  │
    │  (Vector DB)   │      │  (Embeddings)│
    │  localhost:6333│      └──────────────┘
    └────────────────┘
```

---

## Build Sequence

### Phase 1: Infrastructure (1-2 hours)
- [x] Install Docker
- [ ] Run Qdrant container
- [ ] Create Qdrant collection with schema
- [ ] Test embedding insertion/search
- [ ] Get OpenAI API key

### Phase 2: Backend (2-3 hours)
- [ ] New migration: `knowledge_bases` table
- [ ] New model: `KnowledgeBase`
- [ ] New migration: `document_chunks` table (for metadata)
- [ ] Upload endpoint: POST /knowledge-bases
- [ ] Search endpoint: GET /knowledge-bases/{id}/search
- [ ] Integrate Docling pipeline
- [ ] Integrate OpenAI embeddings
- [ ] Test with sample PDF

### Phase 3: Frontend (2-3 hours)
- [ ] New page: `/upload` (homepage)
- [ ] Upload component with drag & drop
- [ ] Processing indicator
- [ ] New page: `/kb/[id]`
- [ ] Search interface
- [ ] Results display with source citations
- [ ] Mobile responsive

### Phase 4: Deploy (1-2 hours)
- [ ] Point askfiles.io DNS to server
- [ ] Install Caddy
- [ ] Configure SSL (auto via Caddy)
- [ ] Set up systemd services
- [ ] Smoke test production

### Phase 5: Landing Polish (1 hour)
- [ ] Hero section
- [ ] "How it works" 3 steps
- [ ] Demo video/GIF
- [ ] Sample knowledge base link

---

## Database Schema

### `knowledge_bases` table
```sql
id (uuid)
title (string) - extracted from first file or user-provided
slug (string) - unique identifier for URL
file_count (int) - number of files uploaded
chunk_count (int) - total chunks stored
created_at
updated_at
```

### `document_chunks` (optional, for metadata)
```sql
id (bigint)
knowledge_base_id (uuid, foreign key)
file_name (string)
page_number (int, nullable)
chunk_text (text) - stored for reference
chunk_index (int) - order within document
created_at
```

**Note:** Actual vectors stored in Qdrant, not PostgreSQL/SQLite.

---

## Qdrant Collection Schema

```json
{
  "name": "askfiles_chunks",
  "vectors": {
    "size": 1536,  // OpenAI text-embedding-3-small dimension
    "distance": "Cosine"
  },
  "payload_schema": {
    "knowledge_base_id": "keyword",
    "file_name": "keyword",
    "chunk_text": "text",
    "page_number": "integer",
    "chunk_index": "integer"
  }
}
```

---

## OpenAI Embeddings Integration

```php
// In Laravel service: app/Services/EmbeddingService.php

use OpenAI;

class EmbeddingService
{
    protected $client;

    public function __construct()
    {
        $this->client = OpenAI::client(config('services.openai.key'));
    }

    public function embed(string $text): array
    {
        $response = $this->client->embeddings()->create([
            'model' => 'text-embedding-3-small',
            'input' => $text,
        ]);

        return $response->embeddings[0]->embedding; // 1536-dim array
    }

    public function embedBatch(array $texts): array
    {
        $response = $this->client->embeddings()->create([
            'model' => 'text-embedding-3-small',
            'input' => $texts, // max 2048 inputs per batch
        ]);

        return array_map(
            fn($item) => $item->embedding,
            $response->embeddings
        );
    }
}
```

---

## Environment Variables Needed

```env
# .env additions

# OpenAI (for embeddings)
OPENAI_API_KEY=sk-...

# Qdrant
QDRANT_HOST=localhost
QDRANT_PORT=6333

# App
APP_URL=https://askfiles.io
```

---

## Cost Estimates (Monthly)

### With 1000 users, avg 5 files each:

| Item | Usage | Cost |
|------|-------|------|
| OpenAI Embeddings | 5000 files × 10 pages avg × 2 chunks/page = 100K chunks × 500 chars = 25M tokens | $0.50 |
| Claude Summarization | 1000 searches/day × 1K tokens = 30M tokens/mo | Free (Max sub) |
| Qdrant (self-hosted) | 100K vectors × 1536 dims × 4 bytes = ~600MB RAM | $0 |
| Server | VPS with 8GB RAM | $20-40 |
| Domain | askfiles.io | €25/yr |

**Total: ~$25/month** for MVP hosting

---

## Success Metrics (Week 1)

- [ ] 50 knowledge bases created
- [ ] 500 searches performed
- [ ] 10+ people share their KB links
- [ ] <2s average search latency
- [ ] 0 errors/crashes

---

## Next Steps After MVP

### Week 2: Add Auth & Private KBs
- User accounts (Laravel Sanctum)
- Private knowledge bases
- File management (delete, re-upload)

### Week 3: Add Billing
- Stripe integration
- Free tier: 3 files, 100 searches/month
- Pro tier: Unlimited files, unlimited searches, $9/mo

### Week 4: Add Features
- Multi-file upload in single KB
- OCR for images
- Audio transcription (Whisper API)
- Export answers to Markdown

---

*Ready to build. Waiting for Docker + Qdrant setup to complete.*
